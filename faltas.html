<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de Controle de Faltas Acad√™micas</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --cor-seguro: #4CAF50;
            --cor-atencao: #FFC107;
            --cor-critico: #F44336;
            --cor-primaria: #2196F3;
            --cor-secundaria: #607D8B;
            --cor-fundo: #f5f5f5;
            --cor-branco: #ffffff;
            --cor-texto: #333333;
            --cor-borda: #ddd;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--cor-fundo);
            color: var(--cor-texto);
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        /* Header */
        header {
            background: linear-gradient(135deg, var(--cor-primaria), #1976D2);
            color: white;
            padding: 30px 20px;
            text-align: center;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        header h1 {
            font-size: 2em;
            margin-bottom: 10px;
        }

        /* Tabs Navigation */
        .tabs-container {
            background: var(--cor-branco);
            margin: 20px 0;
            border-radius: 10px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .tabs-nav {
            display: flex;
            background: #f8f9fa;
            border-bottom: 2px solid var(--cor-borda);
            overflow-x: auto;
            -webkit-overflow-scrolling: touch;
        }

        .tab-button {
            flex: 1;
            min-width: 150px;
            padding: 18px 20px;
            background: transparent;
            border: none;
            cursor: pointer;
            font-size: 1em;
            font-weight: 600;
            color: var(--cor-texto);
            transition: all 0.3s;
            position: relative;
            white-space: nowrap;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .tab-button:hover {
            background: rgba(33, 150, 243, 0.1);
        }

        .tab-button.active {
            color: var(--cor-primaria);
            background: var(--cor-branco);
        }

        .tab-button.active::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: var(--cor-primaria);
        }

        .tab-content {
            display: none;
            padding: 30px;
            animation: fadeIn 0.3s;
        }

        .tab-content.active {
            display: block;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Section Headers */
        .section-header {
            color: var(--cor-primaria);
            margin-bottom: 25px;
            font-size: 1.8em;
            padding-bottom: 15px;
            border-bottom: 3px solid var(--cor-primaria);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        /* Form Styles */
        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .form-group {
            display: flex;
            flex-direction: column;
        }

        .form-group label {
            font-weight: 600;
            margin-bottom: 5px;
            color: var(--cor-texto);
        }

        .form-group input,
        .form-group select {
            padding: 10px;
            border: 2px solid var(--cor-borda);
            border-radius: 5px;
            font-size: 1em;
            transition: border-color 0.3s;
        }

        .form-group input:focus,
        .form-group select:focus {
            outline: none;
            border-color: var(--cor-primaria);
        }

        /* Bot√µes */
        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 5px;
            font-size: 1em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .btn-primary {
            background-color: var(--cor-primaria);
            color: white;
        }

        .btn-primary:hover {
            background-color: #1976D2;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(33, 150, 243, 0.3);
        }

        .btn-success {
            background-color: var(--cor-seguro);
            color: white;
        }

        .btn-success:hover {
            background-color: #45a049;
        }

        .btn-danger {
            background-color: var(--cor-critico);
            color: white;
        }

        .btn-danger:hover {
            background-color: #da190b;
        }

        .btn-secondary {
            background-color: var(--cor-secundaria);
            color: white;
        }

        .btn-secondary:hover {
            background-color: #546E7A;
        }

        .btn-small {
            padding: 8px 16px;
            font-size: 0.9em;
        }

        /* Info Card */
        .info-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
        }

        .info-card strong {
            font-size: 1.1em;
        }

        /* Checkbox e Radio Styles */
        .checkbox-group {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-top: 10px;
        }

        .checkbox-group input[type="checkbox"] {
            width: 20px;
            height: 20px;
            cursor: pointer;
        }

        .dias-semana {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 10px;
        }

        .dia-checkbox {
            display: flex;
            align-items: center;
            gap: 5px;
            padding: 8px 12px;
            background: var(--cor-fundo);
            border-radius: 5px;
            cursor: pointer;
            transition: background 0.3s;
        }

        .dia-checkbox:hover {
            background: #e0e0e0;
        }

        .dia-checkbox input[type="checkbox"] {
            width: 18px;
            height: 18px;
        }

        .horario-group {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
        }

        /* Cards de Mat√©rias */
        .lista-materias {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 20px;
        }

        .card-materia {
            background: var(--cor-branco);
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            border-left: 5px solid var(--cor-primaria);
            transition: transform 0.3s, box-shadow 0.3s;
        }

        .card-materia:hover {
            transform: translateY(-5px);
            box-shadow: 0 4px 16px rgba(0,0,0,0.15);
        }

        .card-materia.status-seguro {
            border-left-color: var(--cor-seguro);
        }

        .card-materia.status-atencao {
            border-left-color: var(--cor-atencao);
        }

        .card-materia.status-critico {
            border-left-color: var(--cor-critico);
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: start;
            margin-bottom: 15px;
        }

        .card-header h3 {
            color: var(--cor-texto);
            font-size: 1.3em;
            margin-bottom: 5px;
        }

        .card-actions {
            display: flex;
            gap: 5px;
        }

        .btn-icon {
            width: 30px;
            height: 30px;
            border: none;
            border-radius: 50%;
            cursor: pointer;
            font-size: 1.2em;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s;
        }

        .btn-edit {
            background-color: var(--cor-atencao);
            color: white;
        }

        .btn-delete {
            background-color: var(--cor-critico);
            color: white;
        }

        .info-materia {
            margin-bottom: 15px;
            font-size: 0.95em;
            color: #666;
        }

        .info-materia p {
            margin: 5px 0;
        }

        .contador-faltas {
            background: var(--cor-fundo);
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
        }

        .contador-display {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .faltas-numero {
            font-size: 2em;
            font-weight: bold;
        }

        .faltas-numero.seguro {
            color: var(--cor-seguro);
        }

        .faltas-numero.atencao {
            color: var(--cor-atencao);
        }

        .faltas-numero.critico {
            color: var(--cor-critico);
        }

        .faltas-texto {
            font-size: 0.9em;
            color: #666;
        }

        /* Barra de Progresso */
        .progress-bar {
            width: 100%;
            height: 20px;
            background-color: #e0e0e0;
            border-radius: 10px;
            overflow: hidden;
            margin: 10px 0;
        }

        .progress-fill {
            height: 100%;
            transition: width 0.3s ease, background-color 0.3s;
            border-radius: 10px;
        }

        .progress-fill.seguro {
            background-color: var(--cor-seguro);
        }

        .progress-fill.atencao {
            background-color: var(--cor-atencao);
        }

        .progress-fill.critico {
            background-color: var(--cor-critico);
        }

        .card-buttons {
            display: flex;
            gap: 10px;
            margin-top: 15px;
            flex-wrap: wrap;
        }

        .card-buttons .btn {
            flex: 1;
            min-width: 120px;
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
            animation: fadeIn 0.3s;
        }

        .modal-content {
            background-color: var(--cor-branco);
            margin: 5% auto;
            padding: 30px;
            border-radius: 10px;
            width: 90%;
            max-width: 600px;
            max-height: 80vh;
            overflow-y: auto;
            animation: slideDown 0.3s;
        }

        @keyframes slideDown {
            from {
                transform: translateY(-50px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid var(--cor-primaria);
        }

        .modal-header h2 {
            color: var(--cor-primaria);
            font-size: 1.5em;
        }

        .close {
            color: #aaa;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
            transition: color 0.3s;
        }

        .close:hover {
            color: var(--cor-critico);
        }

        .lista-faltas-planejadas {
            margin-top: 20px;
        }

        .falta-planejada-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px;
            background: var(--cor-fundo);
            margin: 5px 0;
            border-radius: 5px;
        }

        .falta-planejada-item button {
            background: var(--cor-critico);
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 3px;
            cursor: pointer;
        }

        /* Calend√°rio */
        .calendario-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .calendario-nav {
            display: flex;
            gap: 10px;
            align-items: center;
        }

        .mes-ano {
            font-size: 1.2em;
            font-weight: 600;
            min-width: 200px;
            text-align: center;
        }

        .calendario-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 5px;
        }

        .calendario-dia-semana {
            text-align: center;
            font-weight: 600;
            padding: 10px;
            background: var(--cor-fundo);
            border-radius: 5px;
        }

        .calendario-dia {
            aspect-ratio: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 5px;
            border: 1px solid var(--cor-borda);
            border-radius: 5px;
            cursor: pointer;
            transition: background 0.3s;
            position: relative;
            min-height: 60px;
        }

        .calendario-dia:hover {
            background: var(--cor-fundo);
        }

        .calendario-dia.outro-mes {
            color: #ccc;
        }

        .calendario-dia.hoje {
            border: 2px solid var(--cor-primaria);
            font-weight: bold;
        }

        .dia-numero {
            font-size: 1.1em;
            margin-bottom: 5px;
        }

        .indicadores-dia {
            display: flex;
            gap: 2px;
            flex-wrap: wrap;
            justify-content: center;
        }

        .indicador-materia {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            margin: 1px;
        }

        .legenda-calendario {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin-top: 20px;
            padding-top: 15px;
            border-top: 1px solid var(--cor-borda);
        }

        .legenda-item {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .legenda-cor {
            width: 20px;
            height: 20px;
            border-radius: 3px;
        }

        /* Bimestre Indicator */
        .bimestre-indicator {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 10px 15px;
            border-radius: 5px;
            margin-bottom: 10px;
            text-align: center;
            font-weight: 600;
        }

        /* Alert */
        .alert {
            padding: 15px;
            border-radius: 5px;
            margin: 10px 0;
            font-weight: 500;
        }

        .alert-warning {
            background-color: #fff3cd;
            border-left: 4px solid var(--cor-atencao);
            color: #856404;
        }

        .alert-danger {
            background-color: #f8d7da;
            border-left: 4px solid var(--cor-critico);
            color: #721c24;
        }

        .alert-success {
            background-color: #d4edda;
            border-left: 4px solid var(--cor-seguro);
            color: #155724;
        }

        /* Info resumo */
        .resumo-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }

        .resumo-item {
            padding: 20px;
            background: linear-gradient(135deg, var(--cor-branco), #f8f9fa);
            border-radius: 10px;
            text-align: center;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            border-left: 4px solid var(--cor-primaria);
            transition: transform 0.3s;
        }

        .resumo-item:hover {
            transform: translateY(-5px);
        }

        .resumo-numero {
            font-size: 2.5em;
            font-weight: bold;
            color: var(--cor-primaria);
            margin-bottom: 10px;
        }

        .resumo-label {
            font-size: 1em;
            color: #666;
            font-weight: 600;
        }

        /* Controles de ordena√ß√£o */
        .controls-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding: 15px;
            background: var(--cor-fundo);
            border-radius: 8px;
        }

        .sort-control {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .sort-control label {
            font-weight: 600;
        }

        .sort-control select {
            padding: 8px 12px;
            border: 2px solid var(--cor-borda);
            border-radius: 5px;
            cursor: pointer;
        }

        /* Empty state */
        .empty-state {
            text-align: center;
            padding: 60px 20px;
            color: #999;
        }

        .empty-state .icon {
            font-size: 4em;
            margin-bottom: 20px;
        }

        .empty-state h3 {
            font-size: 1.5em;
            margin-bottom: 10px;
        }

        /* Badge de notifica√ß√£o */
        .notification-badge {
            background: var(--cor-critico);
            color: white;
            font-size: 0.75em;
            padding: 2px 6px;
            border-radius: 10px;
            margin-left: 5px;
        }

        /* Responsividade */
        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }

            header h1 {
                font-size: 1.5em;
            }

            .tabs-nav {
                flex-wrap: wrap;
            }

            .tab-button {
                min-width: 100px;
                padding: 15px 10px;
                font-size: 0.9em;
            }

            .tab-content {
                padding: 20px 15px;
            }

            .form-grid {
                grid-template-columns: 1fr;
            }

            .lista-materias {
                grid-template-columns: 1fr;
            }

            .card-buttons {
                flex-direction: column;
            }

            .card-buttons .btn {
                width: 100%;
            }

            .calendario-grid {
                gap: 2px;
            }

            .calendario-dia {
                min-height: 50px;
                font-size: 0.9em;
            }

            .modal-content {
                width: 95%;
                margin: 10% auto;
                padding: 20px;
            }

            .resumo-grid {
                grid-template-columns: 1fr;
            }

            .controls-bar {
                flex-direction: column;
                gap: 10px;
            }
        }

        /* Loading */
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255,255,255,.3);
            border-radius: 50%;
            border-top-color: white;
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <header>
        <h1>üìö Sistema de Controle de Faltas</h1>
        <p>Gerencie suas faltas acad√™micas de forma inteligente e moderna</p>
    </header>

    <div class="container">
        <!-- SISTEMA DE ABAS -->
        <div class="tabs-container">
            <!-- Navega√ß√£o das Abas -->
            <div class="tabs-nav">
                <button class="tab-button active" data-tab="dados-semestre">
                    üìã Dados do Semestre
                </button>
                <button class="tab-button" data-tab="cadastrar-materia">
                    ‚ûï Cadastrar Mat√©ria
                </button>
                <button class="tab-button" data-tab="minhas-materias">
                    üìö Minhas Mat√©rias
                    <span class="notification-badge" id="badgeMaterias" style="display: none;">0</span>
                </button>
                <button class="tab-button" data-tab="calendario">
                    üìÖ Calend√°rio
                </button>
                <button class="tab-button" data-tab="resumo">
                    üìä Resumo
                </button>
            </div>

            <!-- Conte√∫do da Aba 1: Dados do Semestre -->
            <div class="tab-content active" id="dados-semestre">
                <h2 class="section-header">üìã Dados do Semestre</h2>
                <form id="formSemestre">
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="nomeAluno">Nome do Aluno *</label>
                            <input type="text" id="nomeAluno" required placeholder="Seu nome completo">
                        </div>
                        <div class="form-group">
                            <label for="universidade">Universidade/Institui√ß√£o *</label>
                            <input type="text" id="universidade" required placeholder="Nome da institui√ß√£o">
                        </div>
                        <div class="form-group">
                            <label for="curso">Curso *</label>
                            <input type="text" id="curso" required placeholder="Nome do curso">
                        </div>
                        <div class="form-group">
                            <label for="dataInicio">Data de In√≠cio *</label>
                            <input type="date" id="dataInicio" required>
                        </div>
                        <div class="form-group">
                            <label for="dataFim">Data de Fim *</label>
                            <input type="date" id="dataFim" required>
                        </div>
                    </div>
                    <button type="submit" class="btn btn-primary">Salvar Dados do Semestre</button>
                </form>
                <div id="infoSemestreAtual" style="margin-top: 20px; display: none;">
                    <div class="info-card">
                        <strong>Semestre Atual:</strong> <span id="textoSemestreAtual"></span>
                    </div>
                </div>
            </div>

            <!-- Conte√∫do da Aba 2: Cadastrar Mat√©ria -->
            <div class="tab-content" id="cadastrar-materia">
                <h2 class="section-header">‚ûï Cadastrar Nova Mat√©ria</h2>
                <form id="formMateria">
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="nomeMateria">Nome da Mat√©ria *</label>
                            <input type="text" id="nomeMateria" required placeholder="Ex: C√°lculo I">
                        </div>
                        <div class="form-group">
                            <label for="totalAulas">Total de Aulas no Semestre *</label>
                            <input type="number" id="totalAulas" required min="1" placeholder="Ex: 60">
                        </div>
                        <div class="form-group">
                            <label for="percentualFaltas">% M√°ximo de Faltas *</label>
                            <input type="number" id="percentualFaltas" required min="1" max="100" value="25" placeholder="Ex: 25">
                        </div>
                    </div>

                    <div class="form-group">
                        <div class="checkbox-group">
                            <input type="checkbox" id="resetBimestral">
                            <label for="resetBimestral">As faltas resetam por bimestre?</label>
                        </div>
                    </div>

                    <div class="form-group">
                        <label>Dia(s) da Semana *</label>
                        <div class="dias-semana">
                            <label class="dia-checkbox">
                                <input type="checkbox" name="diasSemana" value="0"> Domingo
                            </label>
                            <label class="dia-checkbox">
                                <input type="checkbox" name="diasSemana" value="1"> Segunda
                            </label>
                            <label class="dia-checkbox">
                                <input type="checkbox" name="diasSemana" value="2"> Ter√ßa
                            </label>
                            <label class="dia-checkbox">
                                <input type="checkbox" name="diasSemana" value="3"> Quarta
                            </label>
                            <label class="dia-checkbox">
                                <input type="checkbox" name="diasSemana" value="4"> Quinta
                            </label>
                            <label class="dia-checkbox">
                                <input type="checkbox" name="diasSemana" value="5"> Sexta
                            </label>
                            <label class="dia-checkbox">
                                <input type="checkbox" name="diasSemana" value="6"> S√°bado
                            </label>
                        </div>
                    </div>

                    <div class="form-group">
                        <label>Hor√°rio da Aula</label>
                        <div class="horario-group">
                            <div class="form-group">
                                <label for="horarioInicio">In√≠cio</label>
                                <input type="time" id="horarioInicio">
                            </div>
                            <div class="form-group">
                                <label for="horarioFim">Fim</label>
                                <input type="time" id="horarioFim">
                            </div>
                        </div>
                    </div>

                    <button type="submit" class="btn btn-success" style="margin-top: 20px;">Adicionar Mat√©ria</button>
                </form>
            </div>

            <!-- Conte√∫do da Aba 3: Minhas Mat√©rias -->
            <div class="tab-content" id="minhas-materias">
                <h2 class="section-header">üìö Minhas Mat√©rias</h2>

                <div class="controls-bar" id="controlsBar" style="display: none;">
                    <div class="sort-control">
                        <label for="ordenacao">Ordenar por:</label>
                        <select id="ordenacao">
                            <option value="nome">Nome (A-Z)</option>
                            <option value="nome-desc">Nome (Z-A)</option>
                            <option value="status">Status (Cr√≠tico primeiro)</option>
                            <option value="faltas">Faltas Restantes (Menor primeiro)</option>
                        </select>
                    </div>
                    <div>
                        <span id="totalMateriasTexto"></span>
                    </div>
                </div>

                <div id="listaMaterias" class="lista-materias"></div>
            </div>

            <!-- Conte√∫do da Aba 4: Calend√°rio -->
            <div class="tab-content" id="calendario">
                <h2 class="section-header">üìÖ Calend√°rio de Aulas e Faltas</h2>
                <div id="calendarioContent">
                    <div class="calendario-header">
                        <button class="btn btn-secondary btn-small" id="mesAnterior">‚Üê Anterior</button>
                        <div class="mes-ano" id="mesAnoAtual"></div>
                        <button class="btn btn-secondary btn-small" id="mesSeguinte">Pr√≥ximo ‚Üí</button>
                    </div>
                    <div class="calendario-grid" id="calendarioGrid">
                        <!-- Dias da semana -->
                        <div class="calendario-dia-semana">Dom</div>
                        <div class="calendario-dia-semana">Seg</div>
                        <div class="calendario-dia-semana">Ter</div>
                        <div class="calendario-dia-semana">Qua</div>
                        <div class="calendario-dia-semana">Qui</div>
                        <div class="calendario-dia-semana">Sex</div>
                        <div class="calendario-dia-semana">S√°b</div>
                    </div>
                    <div class="legenda-calendario" id="legendaCalendario"></div>
                </div>
            </div>

            <!-- Conte√∫do da Aba 5: Resumo -->
            <div class="tab-content" id="resumo">
                <h2 class="section-header">üìä Resumo Geral</h2>
                <div id="resumoContent">
                    <div class="resumo-grid">
                        <div class="resumo-item">
                            <div class="resumo-numero" id="totalMaterias">0</div>
                            <div class="resumo-label">Mat√©rias Cadastradas</div>
                        </div>
                        <div class="resumo-item">
                            <div class="resumo-numero" id="totalFaltasDadas">0</div>
                            <div class="resumo-label">Total de Faltas Dadas</div>
                        </div>
                        <div class="resumo-item">
                            <div class="resumo-numero" id="totalFaltasPermitidas">0</div>
                            <div class="resumo-label">Total de Faltas Permitidas</div>
                        </div>
                        <div class="resumo-item">
                            <div class="resumo-numero" id="materiasRisco" style="color: var(--cor-critico);">0</div>
                            <div class="resumo-label">Mat√©rias em Risco</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- MODAL PLANEJAMENTO DE FALTAS -->
    <div id="modalPlanejamento" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Planejar Faltas</h2>
                <span class="close" id="fecharModal">&times;</span>
            </div>
            <div id="conteudoModal">
                <p><strong>Mat√©ria:</strong> <span id="modalNomeMateria"></span></p>
                <p><strong>Faltas Restantes:</strong> <span id="modalFaltasRestantes"></span></p>

                <div class="form-group" style="margin-top: 20px;">
                    <label for="dataPlanejada">Selecione a data da falta:</label>
                    <input type="date" id="dataPlanejada" class="form-control">
                </div>

                <button class="btn btn-primary" id="adicionarFaltaPlanejada" style="margin-top: 15px;">
                    Adicionar Data
                </button>

                <div class="lista-faltas-planejadas">
                    <h3 style="margin-top: 25px; margin-bottom: 15px;">Faltas Planejadas:</h3>
                    <div id="listaFaltasPlanejadas"></div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ==================== VARI√ÅVEIS GLOBAIS ====================
        let dadosSemestre = null;
        let materias = [];
        let materiaAtualModal = null;
        let mesAtual = new Date().getMonth();
        let anoAtual = new Date().getFullYear();
        let ordenacaoAtual = 'nome';

        const CORES_MATERIAS = [
            '#FF6B6B', '#4ECDC4', '#45B7D1', '#FFA07A', '#98D8C8',
            '#F7DC6F', '#BB8FCE', '#85C1E2', '#F8B739', '#52B788'
        ];

        // ==================== INICIALIZA√á√ÉO ====================
        document.addEventListener('DOMContentLoaded', function() {
            carregarDados();
            inicializarEventos();
            atualizarInterface();
        });

        // ==================== EVENTOS ====================
        function inicializarEventos() {
            // Tabs
            document.querySelectorAll('.tab-button').forEach(button => {
                button.addEventListener('click', () => switchTab(button.dataset.tab));
            });

            // Form Semestre
            document.getElementById('formSemestre').addEventListener('submit', salvarDadosSemestre);

            // Form Mat√©ria
            document.getElementById('formMateria').addEventListener('submit', adicionarMateria);

            // Ordena√ß√£o
            document.getElementById('ordenacao').addEventListener('change', (e) => {
                ordenacaoAtual = e.target.value;
                renderizarMaterias();
            });

            // Modal
            document.getElementById('fecharModal').addEventListener('click', fecharModal);
            document.getElementById('adicionarFaltaPlanejada').addEventListener('click', adicionarFaltaPlanejada);

            // Calend√°rio
            document.getElementById('mesAnterior').addEventListener('click', () => navegarMes(-1));
            document.getElementById('mesSeguinte').addEventListener('click', () => navegarMes(1));

            // Fechar modal ao clicar fora
            window.addEventListener('click', function(event) {
                const modal = document.getElementById('modalPlanejamento');
                if (event.target === modal) {
                    fecharModal();
                }
            });
        }

        // ==================== TABS ====================
        function switchTab(tabId) {
            // Remover active de todos os bot√µes e conte√∫dos
            document.querySelectorAll('.tab-button').forEach(btn => btn.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));

            // Adicionar active ao bot√£o e conte√∫do selecionado
            document.querySelector(`[data-tab="${tabId}"]`).classList.add('active');
            document.getElementById(tabId).classList.add('active');

            // Atualizar interface espec√≠fica da aba
            if (tabId === 'calendario') {
                atualizarCalendario();
            } else if (tabId === 'resumo') {
                atualizarResumo();
            } else if (tabId === 'minhas-materias') {
                renderizarMaterias();
            }
        }

        // ==================== SEMESTRE ====================
        function salvarDadosSemestre(e) {
            e.preventDefault();

            dadosSemestre = {
                nomeAluno: document.getElementById('nomeAluno').value,
                universidade: document.getElementById('universidade').value,
                curso: document.getElementById('curso').value,
                dataInicio: document.getElementById('dataInicio').value,
                dataFim: document.getElementById('dataFim').value
            };

            salvarDados();

            document.getElementById('infoSemestreAtual').style.display = 'block';
            document.getElementById('textoSemestreAtual').textContent =
                `${dadosSemestre.nomeAluno} - ${dadosSemestre.curso} (${formatarData(dadosSemestre.dataInicio)} a ${formatarData(dadosSemestre.dataFim)})`;

            mostrarAlerta('Dados do semestre salvos com sucesso!', 'success');
        }

        // ==================== MAT√âRIAS ====================
        function adicionarMateria(e) {
            e.preventDefault();

            if (!dadosSemestre) {
                mostrarAlerta('Por favor, preencha os dados do semestre primeiro!', 'danger');
                switchTab('dados-semestre');
                return;
            }

            const diasSelecionados = Array.from(document.querySelectorAll('input[name="diasSemana"]:checked'))
                .map(cb => parseInt(cb.value));

            if (diasSelecionados.length === 0) {
                mostrarAlerta('Selecione pelo menos um dia da semana!', 'warning');
                return;
            }

            const totalAulas = parseInt(document.getElementById('totalAulas').value);
            const percentual = parseInt(document.getElementById('percentualFaltas').value);
            const faltasPermitidas = Math.floor(totalAulas * (percentual / 100));

            const materia = {
                id: Date.now(),
                nome: document.getElementById('nomeMateria').value,
                totalAulas: totalAulas,
                percentualFaltas: percentual,
                faltasPermitidas: faltasPermitidas,
                faltasDadas: 0,
                resetBimestral: document.getElementById('resetBimestral').checked,
                diasSemana: diasSelecionados,
                horarioInicio: document.getElementById('horarioInicio').value,
                horarioFim: document.getElementById('horarioFim').value,
                faltasPlanejadas: [],
                cor: CORES_MATERIAS[materias.length % CORES_MATERIAS.length],
                bimestreAtual: 1,
                historicoFaltasBimestres: {1: 0, 2: 0, 3: 0, 4: 0}
            };

            materias.push(materia);
            salvarDados();

            document.getElementById('formMateria').reset();
            atualizarInterface();

            mostrarAlerta(`Mat√©ria "${materia.nome}" adicionada com sucesso!`, 'success');

            // Mudar para a aba de mat√©rias
            switchTab('minhas-materias');
        }

        function editarMateria(id) {
            const materia = materias.find(m => m.id === id);
            if (!materia) return;

            document.getElementById('nomeMateria').value = materia.nome;
            document.getElementById('totalAulas').value = materia.totalAulas;
            document.getElementById('percentualFaltas').value = materia.percentualFaltas;
            document.getElementById('resetBimestral').checked = materia.resetBimestral;
            document.getElementById('horarioInicio').value = materia.horarioInicio;
            document.getElementById('horarioFim').value = materia.horarioFim;

            // Marcar dias da semana
            document.querySelectorAll('input[name="diasSemana"]').forEach(cb => {
                cb.checked = materia.diasSemana.includes(parseInt(cb.value));
            });

            // Remover mat√©ria antiga
            excluirMateria(id, true);

            switchTab('cadastrar-materia');
            mostrarAlerta('Edite os dados e clique em "Adicionar Mat√©ria" para salvar', 'warning');
        }

        function excluirMateria(id, semConfirmacao = false) {
            if (!semConfirmacao && !confirm('Tem certeza que deseja excluir esta mat√©ria?')) {
                return;
            }

            materias = materias.filter(m => m.id !== id);
            salvarDados();
            atualizarInterface();

            if (!semConfirmacao) {
                mostrarAlerta('Mat√©ria exclu√≠da com sucesso!', 'success');
            }
        }

        function registrarFalta(id) {
            const materia = materias.find(m => m.id === id);
            if (!materia) return;

            if (materia.faltasDadas >= materia.faltasPermitidas) {
                mostrarAlerta('ATEN√á√ÉO: Voc√™ j√° atingiu o limite de faltas para esta mat√©ria!', 'danger');
                return;
            }

            materia.faltasDadas++;

            if (materia.resetBimestral) {
                materia.historicoFaltasBimestres[materia.bimestreAtual]++;
            }

            salvarDados();
            atualizarInterface();

            verificarAlertas(materia);
        }

        function verificarAlertas(materia) {
            const faltasRestantes = materia.faltasPermitidas - materia.faltasDadas;
            const percentualRestante = (faltasRestantes / materia.faltasPermitidas) * 100;

            if (faltasRestantes === 0) {
                mostrarAlerta(`CR√çTICO: Voc√™ atingiu o limite de faltas em ${materia.nome}!`, 'danger');
            } else if (percentualRestante <= 25) {
                mostrarAlerta(`ATEN√á√ÉO: Restam apenas ${faltasRestantes} falta(s) em ${materia.nome}!`, 'warning');
            }
        }

        function calcularBimestreAtual(materia) {
            if (!dadosSemestre || !materia.resetBimestral) return 1;

            const inicio = new Date(dadosSemestre.dataInicio);
            const fim = new Date(dadosSemestre.dataFim);
            const hoje = new Date();

            const duracaoTotal = fim - inicio;
            const duracaoBimestre = duracaoTotal / 4;
            const tempoDecorrido = hoje - inicio;

            const bimestre = Math.ceil(tempoDecorrido / duracaoBimestre);
            return Math.max(1, Math.min(4, bimestre));
        }

        function atualizarBimestres() {
            materias.forEach(materia => {
                if (materia.resetBimestral) {
                    const bimestreCalculado = calcularBimestreAtual(materia);

                    if (bimestreCalculado !== materia.bimestreAtual) {
                        // Reset ao mudar de bimestre
                        materia.bimestreAtual = bimestreCalculado;
                        materia.faltasDadas = 0;
                        salvarDados();
                    }
                }
            });
        }

        // ==================== ORDENA√á√ÉO ====================
        function ordenarMaterias() {
            let materiasOrdenadas = [...materias];

            switch(ordenacaoAtual) {
                case 'nome':
                    materiasOrdenadas.sort((a, b) => a.nome.localeCompare(b.nome));
                    break;
                case 'nome-desc':
                    materiasOrdenadas.sort((a, b) => b.nome.localeCompare(a.nome));
                    break;
                case 'status':
                    materiasOrdenadas.sort((a, b) => {
                        const statusA = calcularStatus(a);
                        const statusB = calcularStatus(b);
                        const prioridade = { 'critico': 0, 'atencao': 1, 'seguro': 2 };
                        return prioridade[statusA] - prioridade[statusB];
                    });
                    break;
                case 'faltas':
                    materiasOrdenadas.sort((a, b) => {
                        const faltasA = a.faltasPermitidas - a.faltasDadas;
                        const faltasB = b.faltasPermitidas - b.faltasDadas;
                        return faltasA - faltasB;
                    });
                    break;
            }

            return materiasOrdenadas;
        }

        function calcularStatus(materia) {
            const percentualUsado = (materia.faltasDadas / materia.faltasPermitidas) * 100;

            if (percentualUsado >= 75) return 'critico';
            if (percentualUsado >= 50) return 'atencao';
            return 'seguro';
        }

        // ==================== PLANEJAMENTO DE FALTAS ====================
        function abrirPlanejamento(id) {
            const materia = materias.find(m => m.id === id);
            if (!materia) return;

            materiaAtualModal = materia;

            document.getElementById('modalNomeMateria').textContent = materia.nome;
            document.getElementById('modalFaltasRestantes').textContent =
                materia.faltasPermitidas - materia.faltasDadas;

            atualizarListaFaltasPlanejadas();

            document.getElementById('modalPlanejamento').style.display = 'block';
        }

        function fecharModal() {
            document.getElementById('modalPlanejamento').style.display = 'none';
            document.getElementById('dataPlanejada').value = '';
            materiaAtualModal = null;
        }

        function adicionarFaltaPlanejada() {
            if (!materiaAtualModal) return;

            const data = document.getElementById('dataPlanejada').value;

            if (!data) {
                mostrarAlerta('Selecione uma data!', 'warning');
                return;
            }

            const dataObj = new Date(data + 'T00:00:00');

            if (!materiaAtualModal.faltasPlanejadas) {
                materiaAtualModal.faltasPlanejadas = [];
            }

            if (materiaAtualModal.faltasPlanejadas.includes(data)) {
                mostrarAlerta('Esta data j√° est√° planejada!', 'warning');
                return;
            }

            materiaAtualModal.faltasPlanejadas.push(data);
            materiaAtualModal.faltasPlanejadas.sort();

            salvarDados();
            atualizarListaFaltasPlanejadas();
            atualizarCalendario();

            document.getElementById('dataPlanejada').value = '';
            mostrarAlerta('Falta planejada adicionada!', 'success');
        }

        function removerFaltaPlanejada(id, data) {
            const materia = materias.find(m => m.id === id);
            if (!materia) return;

            materia.faltasPlanejadas = materia.faltasPlanejadas.filter(d => d !== data);

            salvarDados();

            if (materiaAtualModal && materiaAtualModal.id === id) {
                atualizarListaFaltasPlanejadas();
            }

            atualizarCalendario();
        }

        function atualizarListaFaltasPlanejadas() {
            const container = document.getElementById('listaFaltasPlanejadas');

            if (!materiaAtualModal.faltasPlanejadas || materiaAtualModal.faltasPlanejadas.length === 0) {
                container.innerHTML = '<p style="color: #999; text-align: center;">Nenhuma falta planejada</p>';
                return;
            }

            container.innerHTML = materiaAtualModal.faltasPlanejadas
                .map(data => `
                    <div class="falta-planejada-item">
                        <span>${formatarData(data)}</span>
                        <button onclick="removerFaltaPlanejada(${materiaAtualModal.id}, '${data}')">
                            Remover
                        </button>
                    </div>
                `).join('');
        }

        // ==================== CALEND√ÅRIO ====================
        function navegarMes(direcao) {
            mesAtual += direcao;

            if (mesAtual > 11) {
                mesAtual = 0;
                anoAtual++;
            } else if (mesAtual < 0) {
                mesAtual = 11;
                anoAtual--;
            }

            atualizarCalendario();
        }

        function atualizarCalendario() {
            const meses = ['Janeiro', 'Fevereiro', 'Mar√ßo', 'Abril', 'Maio', 'Junho',
                          'Julho', 'Agosto', 'Setembro', 'Outubro', 'Novembro', 'Dezembro'];

            document.getElementById('mesAnoAtual').textContent = `${meses[mesAtual]} ${anoAtual}`;

            const primeiroDia = new Date(anoAtual, mesAtual, 1);
            const ultimoDia = new Date(anoAtual, mesAtual + 1, 0);
            const diasNoMes = ultimoDia.getDate();
            const diaSemanaInicio = primeiroDia.getDay();

            const grid = document.getElementById('calendarioGrid');

            // Manter cabe√ßalho dos dias da semana
            const diasSemana = grid.querySelectorAll('.calendario-dia-semana');
            grid.innerHTML = '';
            diasSemana.forEach(dia => grid.appendChild(dia));

            // Dias do m√™s anterior
            const mesAnterior = new Date(anoAtual, mesAtual, 0);
            const diasMesAnterior = mesAnterior.getDate();

            for (let i = diaSemanaInicio - 1; i >= 0; i--) {
                const dia = diasMesAnterior - i;
                const diaDiv = criarDiaCalendario(dia, true, mesAtual === 0 ? 11 : mesAtual - 1,
                                                  mesAtual === 0 ? anoAtual - 1 : anoAtual);
                grid.appendChild(diaDiv);
            }

            // Dias do m√™s atual
            const hoje = new Date();
            for (let dia = 1; dia <= diasNoMes; dia++) {
                const ehHoje = dia === hoje.getDate() && mesAtual === hoje.getMonth() &&
                              anoAtual === hoje.getFullYear();
                const diaDiv = criarDiaCalendario(dia, false, mesAtual, anoAtual, ehHoje);
                grid.appendChild(diaDiv);
            }

            // Dias do pr√≥ximo m√™s
            const totalDias = diaSemanaInicio + diasNoMes;
            const diasRestantes = totalDias % 7 === 0 ? 0 : 7 - (totalDias % 7);

            for (let dia = 1; dia <= diasRestantes; dia++) {
                const diaDiv = criarDiaCalendario(dia, true, mesAtual === 11 ? 0 : mesAtual + 1,
                                                  mesAtual === 11 ? anoAtual + 1 : anoAtual);
                grid.appendChild(diaDiv);
            }

            atualizarLegendaCalendario();
        }

        function criarDiaCalendario(numeroDia, outroMes, mes, ano, ehHoje = false) {
            const diaDiv = document.createElement('div');
            diaDiv.className = 'calendario-dia';

            if (outroMes) {
                diaDiv.classList.add('outro-mes');
            }

            if (ehHoje) {
                diaDiv.classList.add('hoje');
            }

            const diaNumero = document.createElement('div');
            diaNumero.className = 'dia-numero';
            diaNumero.textContent = numeroDia;
            diaDiv.appendChild(diaNumero);

            const data = new Date(ano, mes, numeroDia);
            const diaSemana = data.getDay();
            const dataStr = `${ano}-${String(mes + 1).padStart(2, '0')}-${String(numeroDia).padStart(2, '0')}`;

            const indicadores = document.createElement('div');
            indicadores.className = 'indicadores-dia';

            materias.forEach(materia => {
                if (materia.diasSemana.includes(diaSemana)) {
                    const indicador = document.createElement('div');
                    indicador.className = 'indicador-materia';
                    indicador.style.backgroundColor = materia.cor;
                    indicador.title = materia.nome;

                    // Verificar se √© falta planejada
                    if (materia.faltasPlanejadas && materia.faltasPlanejadas.includes(dataStr)) {
                        indicador.style.border = '2px solid #000';
                        indicador.style.width = '12px';
                        indicador.style.height = '12px';
                    }

                    indicadores.appendChild(indicador);
                }
            });

            diaDiv.appendChild(indicadores);

            return diaDiv;
        }

        function atualizarLegendaCalendario() {
            const legenda = document.getElementById('legendaCalendario');

            if (materias.length === 0) {
                legenda.innerHTML = '<p style="color: #999;">Nenhuma mat√©ria cadastrada</p>';
                return;
            }

            legenda.innerHTML = materias.map(materia => `
                <div class="legenda-item">
                    <div class="legenda-cor" style="background-color: ${materia.cor}"></div>
                    <span>${materia.nome}</span>
                </div>
            `).join('');
        }

        // ==================== INTERFACE ====================
        function atualizarInterface() {
            atualizarBimestres();
            renderizarMaterias();
            atualizarResumo();
            atualizarBadges();
        }

        function atualizarBadges() {
            const badge = document.getElementById('badgeMaterias');
            if (materias.length > 0) {
                badge.textContent = materias.length;
                badge.style.display = 'inline-block';
            } else {
                badge.style.display = 'none';
            }
        }

        function renderizarMaterias() {
            const container = document.getElementById('listaMaterias');
            const controlsBar = document.getElementById('controlsBar');

            if (materias.length === 0) {
                controlsBar.style.display = 'none';
                container.innerHTML = `
                    <div class="empty-state">
                        <div class="icon">üìö</div>
                        <h3>Nenhuma mat√©ria cadastrada</h3>
                        <p>Adicione sua primeira mat√©ria na aba "Cadastrar Mat√©ria"</p>
                    </div>
                `;
                return;
            }

            controlsBar.style.display = 'flex';
            document.getElementById('totalMateriasTexto').textContent =
                `${materias.length} mat√©ria${materias.length !== 1 ? 's' : ''} cadastrada${materias.length !== 1 ? 's' : ''}`;

            const materiasOrdenadas = ordenarMaterias();

            container.innerHTML = materiasOrdenadas.map(materia => {
                const faltasRestantes = materia.faltasPermitidas - materia.faltasDadas;
                const percentualUsado = (materia.faltasDadas / materia.faltasPermitidas) * 100;

                const status = calcularStatus(materia);

                let statusTexto = 'Seguro';
                if (percentualUsado >= 100) {
                    statusTexto = 'Limite Atingido';
                } else if (status === 'critico') {
                    statusTexto = 'Cr√≠tico';
                } else if (status === 'atencao') {
                    statusTexto = 'Aten√ß√£o';
                }

                const diasSemanaTexto = materia.diasSemana
                    .map(d => ['Dom', 'Seg', 'Ter', 'Qua', 'Qui', 'Sex', 'S√°b'][d])
                    .join(', ');

                const horario = materia.horarioInicio && materia.horarioFim
                    ? `${materia.horarioInicio} - ${materia.horarioFim}`
                    : 'N√£o informado';

                return `
                    <div class="card-materia status-${status}">
                        <div class="card-header">
                            <div>
                                <h3>${materia.nome}</h3>
                                <span style="color: ${materia.cor}; font-weight: 600;">‚óè</span>
                            </div>
                            <div class="card-actions">
                                <button class="btn-icon btn-edit" onclick="editarMateria(${materia.id})" title="Editar">
                                    ‚úèÔ∏è
                                </button>
                                <button class="btn-icon btn-delete" onclick="excluirMateria(${materia.id})" title="Excluir">
                                    üóëÔ∏è
                                </button>
                            </div>
                        </div>

                        <div class="info-materia">
                            <p><strong>Total de aulas:</strong> ${materia.totalAulas}</p>
                            <p><strong>Dias:</strong> ${diasSemanaTexto}</p>
                            <p><strong>Hor√°rio:</strong> ${horario}</p>
                            <p><strong>Limite de faltas:</strong> ${materia.percentualFaltas}%</p>
                            ${materia.resetBimestral ? `
                                <div class="bimestre-indicator">
                                    üìÖ Bimestre Atual: ${materia.bimestreAtual}¬∫
                                </div>
                            ` : ''}
                        </div>

                        <div class="contador-faltas">
                            <div class="contador-display">
                                <div>
                                    <div class="faltas-numero ${status}">
                                        ${faltasRestantes}
                                    </div>
                                    <div class="faltas-texto">faltas restantes</div>
                                </div>
                                <div style="text-align: right;">
                                    <div class="faltas-numero" style="font-size: 1.5em; color: #666;">
                                        ${materia.faltasDadas}/${materia.faltasPermitidas}
                                    </div>
                                    <div class="faltas-texto">utilizadas</div>
                                </div>
                            </div>

                            <div class="progress-bar">
                                <div class="progress-fill ${status}" style="width: ${Math.min(percentualUsado, 100)}%"></div>
                            </div>

                            <div style="text-align: center; margin-top: 8px; font-weight: 600; color: var(--cor-${status});">
                                Status: ${statusTexto}
                            </div>
                        </div>

                        ${materia.faltasPlanejadas && materia.faltasPlanejadas.length > 0 ? `
                            <div class="alert alert-warning" style="margin-top: 10px;">
                                <strong>üìÖ ${materia.faltasPlanejadas.length} falta(s) planejada(s)</strong>
                            </div>
                        ` : ''}

                        <div class="card-buttons">
                            <button class="btn btn-primary btn-small" onclick="registrarFalta(${materia.id})">
                                ‚ûï Registrar Falta
                            </button>
                            <button class="btn btn-secondary btn-small" onclick="abrirPlanejamento(${materia.id})">
                                üìÖ Planejar Faltas
                            </button>
                        </div>
                    </div>
                `;
            }).join('');
        }

        function atualizarResumo() {
            const totalMaterias = materias.length;
            const totalFaltasDadas = materias.reduce((acc, m) => acc + m.faltasDadas, 0);
            const totalFaltasPermitidas = materias.reduce((acc, m) => acc + m.faltasPermitidas, 0);
            const materiasRisco = materias.filter(m => {
                const percentual = (m.faltasDadas / m.faltasPermitidas) * 100;
                return percentual >= 75;
            }).length;

            document.getElementById('totalMaterias').textContent = totalMaterias;
            document.getElementById('totalFaltasDadas').textContent = totalFaltasDadas;
            document.getElementById('totalFaltasPermitidas').textContent = totalFaltasPermitidas;
            document.getElementById('materiasRisco').textContent = materiasRisco;
        }

        // ==================== PERSIST√äNCIA ====================
        function salvarDados() {
            localStorage.setItem('dadosSemestre', JSON.stringify(dadosSemestre));
            localStorage.setItem('materias', JSON.stringify(materias));
        }

        function carregarDados() {
            const semestreSalvo = localStorage.getItem('dadosSemestre');
            const materiasSalvas = localStorage.getItem('materias');

            if (semestreSalvo) {
                dadosSemestre = JSON.parse(semestreSalvo);

                document.getElementById('nomeAluno').value = dadosSemestre.nomeAluno;
                document.getElementById('universidade').value = dadosSemestre.universidade;
                document.getElementById('curso').value = dadosSemestre.curso;
                document.getElementById('dataInicio').value = dadosSemestre.dataInicio;
                document.getElementById('dataFim').value = dadosSemestre.dataFim;

                document.getElementById('infoSemestreAtual').style.display = 'block';
                document.getElementById('textoSemestreAtual').textContent =
                    `${dadosSemestre.nomeAluno} - ${dadosSemestre.curso} (${formatarData(dadosSemestre.dataInicio)} a ${formatarData(dadosSemestre.dataFim)})`;
            }

            if (materiasSalvas) {
                materias = JSON.parse(materiasSalvas);
            }
        }

        // ==================== UTILIDADES ====================
        function formatarData(dataStr) {
            const data = new Date(dataStr + 'T00:00:00');
            return data.toLocaleDateString('pt-BR');
        }

        function mostrarAlerta(mensagem, tipo) {
            // Criar elemento de alerta tempor√°rio
            const alerta = document.createElement('div');
            alerta.className = `alert alert-${tipo}`;
            alerta.textContent = mensagem;
            alerta.style.position = 'fixed';
            alerta.style.top = '20px';
            alerta.style.right = '20px';
            alerta.style.zIndex = '9999';
            alerta.style.minWidth = '300px';
            alerta.style.boxShadow = '0 4px 12px rgba(0,0,0,0.2)';

            document.body.appendChild(alerta);

            setTimeout(() => {
                alerta.style.opacity = '0';
                alerta.style.transition = 'opacity 0.3s';
                setTimeout(() => alerta.remove(), 300);
            }, 3000);
        }
    </script>
</body>
</html>
